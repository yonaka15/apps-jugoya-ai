{% load static %}
<!DOCTYPE html>
<html>

<head>
  <title>検索結果 - {{ query }}</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{% static 'read_images/css/styles.css' %}">
</head>

<body>
  <div class="container">
    <h1>検索結果: "{{ query }}"</h1>
    
    <div class="search-actions">
      <a href="{% url 'read_images:index' %}" class="back-link">新しい検索</a>
    </div>

    {% if error %}
    <div class="error-message">
      <p>{{ error }}</p>
    </div>
    {% else %}
      {% if images %}
        <div class="results-count">
          <p>{{ images|length }}件の結果が見つかりました</p>
        </div>
        
        <div class="image-results">
          {% for image in images %}
          <div class="image-card">
            <div class="image-container">
              <img src="data:{{ image.metadata.content_type }};base64,{{ image.metadata.image_base64 }}" alt="{{ image.metadata.filename }}">
            </div>
            <div class="image-details">
              <h3>{{ image.metadata.filename }}</h3>
              <p class="similarity">類似度: {{ image.similarity|floatformat:2 }}</p>
              <p class="timestamp">撮影日時: {{ image.metadata.timestamp }}</p>
              <p class="model">処理モデル: {{ image.metadata.model }}</p>
            </div>
          </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="no-results">
          <p>検索結果が見つかりませんでした。別のキーワードをお試しください。</p>
        </div>
      {% endif %}
    {% endif %}
  </div>
</body>

</html>
<!-- vim: set ft=htmldjango: -->